parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"ibrd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InstanceState=exports.State=void 0,exports.State={opc:1,ops:0,inventory:{ores:0,refined:0},generation:{lv:0,lvOnRefine:0,xp:0,maxXp:10},ore:{hp:50,maxHp:50,spriteType:5,spriteHp:1},stats:{oresEarned:0,lifetimeOresEarned:0,weakSpotMultiplier:5,oreClicks:0,weakSpotClicks:0,currentCombo:0,highestCombo:0,rocksDestroyed:0},research:{inProgress:!1,currentProgress:null,currentUpgrade:null,power:2,maxPower:2,powerToOreRatio:5},settings:{tick:60,oreHpType:"percentage"},buildings:{},upgrades:{},researchUpgrades:{},achievements:{},textScrollerMessages:["What is a rocks favorite fruit? ... Pom-a-granite","Did you see that cleavage? Now that's some gneiss schist.","All rock and no clay makes you a dull boy (or girl)","Don't take life for granite","What happens when you throw a blue rock in the red sea? ... It gets wet","As you can tell, these are pretty lame... Submit your own to /u/name_is_Syn","Rocks really rock!","I can't believe I'm googling rock puns right now","There are a few gems amongst all these terrible rock puns","These puns sure are all ore nothing","Rock pun here"]},exports.InstanceState={selectedTab:"store",buyAmount:1,oreParticles:{},tabs:[],toasts:[],textScroller:{isInProgress:!0,backlog:[]}};
},{}],"owfE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UpdatesState=void 0,exports.UpdatesState={updateOPS:!0,updateOres:!0,updateOreHp:!0,updateOreSprite:!0,updateGenerationLv:!0,updateGenerationLvOnRefine:!0,updateGenerationXp:!0,updateTabs:!0,updateTabContent:!0};
},{}],"GUxD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isElEmpty=exports.sortObj=exports.isObjEmpty=exports.getRandomFromArr=exports.getRandomColor=exports.findCodeNameInArr=exports.getGeometricSequencePrice=exports.beautifyNumber=exports.createEl=exports.updateEl=exports.getCodeName=exports.getRandomNum=exports.removeEl=exports.formatNumber=exports.getPercentage=exports.select=void 0;var e=require("./State");exports.select=function(e){return document.querySelector(""+e)},exports.getPercentage=function(e,t){return e/t*100},exports.formatNumber=function(e){return Math.ceil(e)},exports.removeEl=function(e){e.parentNode&&e.parentNode.removeChild(e)},exports.getRandomNum=function(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=!0);var o=Math.pow(10,Math.max(i,0)),r=t*o,l=e*o,a=n?1:0;return(Math.floor(Math.random()*(r-l+a))+l)/o},exports.getCodeName=function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"").replace(/\./g,"")},exports.updateEl=function(e,t){e.innerHTML="",e.append(t)},exports.createEl=function(e,t,i){void 0===t&&(t=[]),void 0===i&&(i="");var n=document.createElement(e);return t.forEach(function(e){return n.classList.add(e)}),n.innerHTML=i+"",n},exports.beautifyNumber=function(e){if(!e)return 0;if(e<=10)return Math.round(e)===e?e:e.toFixed(1);var t=Math.log10(e)/3|0;if(0===t)return Math.round(e);var i=["","Thousand","Million","Billion","Trillion","Quadrillion","Quintillion","Sextillion","Septillion","Octillion","Nonillion","Decillion","Undecillion","Dodecillion","Tredecillion","Quattuordecillion","Quindecillion","Sexdecillion","Septendecillion","Octodecillion","Novemdecillion","Vigintillion","Unvigintillion","Dovigintillion","Trevigintillion","Quattuorvigintillion","Quinvigintillion","Sexvigintillion","Septenvigintillion","Octovigintillion","Novemvigintillion","Trigintillion","Untrigintillion","Dotrigintillion","Tretrigintillion","Quattuortrigintillion","Quintrigintillion","Sextrigintillion","Septentrigintillion","Octotrigintillion","Novemtrigintillion","F*ckloadillion","F*cktonillion"][t],n=Math.pow(10,3*t);return parseFloat((e/n).toFixed(2))+" "+i},exports.getGeometricSequencePrice=function(t){if("max"!==e.InstanceState.buyAmount){var i=t.basePrice*(1-Math.pow(t.priceScale,t.owned))/(1-t.priceScale);return t.basePrice*(1-Math.pow(t.priceScale,e.InstanceState.buyAmount+t.owned))/(1-t.priceScale)-i}},exports.findCodeNameInArr=function(e,t){return t.find(function(t){return t.codeName===e})},exports.getRandomColor=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},exports.getRandomFromArr=function(e){return e[Math.floor(Math.random()*e.length)]},exports.isObjEmpty=function(e){return 0===Object.keys(e).length},exports.sortObj=function(e,t){return Object.entries(e).sort(function(e,i){return e[1][t]-i[1][t]})},exports.isElEmpty=function(e){return e.innerHTML.length<=0};
},{"./State":"ibrd"}],"FCax":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tooltipWrapperEl=exports.tabsContentWrapperEl=exports.tabsWrapperEl=exports.particlesCanvasContext=exports.particlesCanvasEl=exports.comboSignNumberEl=exports.comboSignEl=exports.topbarInventoryGenerationXpBarEl=exports.topbarInventoryGenerationLvOnRefine=exports.topbarInventoryGenerationLv=exports.topbarInventoryOresEl=exports.topbarInventoryEl=exports.oreHpEl=exports.oreSpriteEl=exports.oreSpriteContainerEl=exports.toastsContainerRightEl=exports.toastsContainerLeftEl=exports.toastsContainerEl=exports.textScrollerTextEl=exports.textScrollerContainerEl=exports.torchRight=exports.torchLeft=exports.gameContainerRight=exports.pageContainer=void 0;var e=require("./utils");exports.pageContainer=e.select(".page-container"),exports.gameContainerRight=e.select(".game-container-right"),exports.torchLeft=e.select(".torch-left"),exports.torchRight=e.select(".torch-right"),exports.textScrollerContainerEl=e.select(".text-scroller-container"),exports.textScrollerTextEl=e.select(".text-scroller-container p"),exports.toastsContainerEl=e.select(".toasts-container"),exports.toastsContainerLeftEl=e.select(".toasts-container .left"),exports.toastsContainerRightEl=e.select(".toasts-container .right"),exports.oreSpriteContainerEl=e.select(".ore-sprite-container"),exports.oreSpriteEl=e.select(".ore-sprite"),exports.oreHpEl=e.select(".ore-hp"),exports.topbarInventoryEl=e.select(".topbar-inventory"),exports.topbarInventoryOresEl=e.select(".topbar-inventory-ores > .amount"),exports.topbarInventoryGenerationLv=e.select(".topbar-inventory-generation > .level"),exports.topbarInventoryGenerationLvOnRefine=e.select(".topbar-inventory-generation > .level-on-refine"),exports.topbarInventoryGenerationXpBarEl=e.select(".topbar-inventory-generation-xp .bar"),exports.comboSignEl=e.select(".combo-sign"),exports.comboSignNumberEl=e.select(".combo-sign span"),exports.particlesCanvasEl=e.select("#particles"),exports.particlesCanvasContext=exports.particlesCanvasEl.getContext("2d"),exports.tabsWrapperEl=e.select(".tabs-wrapper"),exports.tabsContentWrapperEl=e.select(".tabs-content-wrapper"),exports.tooltipWrapperEl=e.select(".tooltip-wrapper");
},{"./utils":"GUxD"}],"vI8V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateOreParticles=void 0;var t=require("./utils"),e=require("./constants"),i=require("./State"),s=0,a={gravity:.5,maxLife:100};exports.generateOreParticles=function(t,e){void 0===e&&(e=4);for(var i=0;i<e;i++)new r(t)};var r=function(a){if(a)this.x=a.clientX,this.y=a.clientY;else{var r=e.oreSpriteEl.getBoundingClientRect();this.x=t.getRandomNum(r.left,r.right),this.y=r.top}this.vx=t.getRandomNum(-2,2,5),this.vy=t.getRandomNum(-2,-1,5),this.size=t.getRandomNum(.5,2.5,3),s+=1,i.InstanceState.oreParticles[s]=this,this.id=s,this.life=0,this.opacity=1};r.prototype.draw=function(){this.x+=this.vx,this.y+=this.vy,this.vy+=a.gravity*Math.random(),this.life+=1,this.opacity-=.02,(this.life>a.maxLife||this.y>=window.innerHeight)&&delete i.InstanceState.oreParticles[this.id];t.getRandomNum(150,200);e.particlesCanvasContext.beginPath(),e.particlesCanvasContext.fillStyle="rgba( 255, 255, 255, "+this.opacity+" )",e.particlesCanvasContext.arc(this.x,this.y,this.size,0,2*Math.PI,!0),e.particlesCanvasContext.closePath(),e.particlesCanvasContext.fill()};
},{"./utils":"GUxD","./constants":"FCax","./State":"ibrd"}],"UmE0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateRisingText=void 0;var e=require("./utils"),t=require("./constants");exports.generateRisingText=function(n,i,o){var r=document.createElement("div");switch(r.style.position="absolute",r.style.pointerEvents="none",r.style.color="white",r.style.fontSize="24px",r.style.fontFamily="Germania One",r.style.zIndex="2",r.style.textShadow="0 0 1px rgba(0, 0, 0, 0.5)",r.style.animation="flyingNumber 2s forwards ease-out",i){case"buy":r.style.color="crimson",r.style.fontSize="30px",r.innerHTML="-$";break;case"weakSpot":r.style.fontSize="28px",r.style.animationDuration="2.5s",r.innerHTML="+"+o;break;case"combo":r.innerHTML=o+" hit combo",r.style.color=e.getRandomColor(),r.style.fontSize="35px",r.style.animationDuration="3s";break;case"buildingOps":var s=t.oreSpriteEl.getBoundingClientRect();r.style.animation="buildingFlyingNumber 1.2s ease-out",r.style.left=(s.left+s.right)/2+"px",r.style.top=(s.top+s.bottom)/2+"px",r.innerHTML="+"+e.beautifyNumber(o);break;default:r.innerHTML="+"+e.beautifyNumber(o)}n&&(r.style.left=n.clientX+e.getRandomNum(-20,20)+"px",r.style.top=n.clientY+e.getRandomNum(-5,5)+"px"),t.pageContainer.append(r),r.addEventListener("animationend",function(){return e.removeEl(r)})};
},{"./utils":"GUxD","./constants":"FCax"}],"PZUX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.instantiateTabs=void 0;var e=require("./utils"),t=require("./State"),a=function(t){this.name=t.name,this.codeName=e.getCodeName(t.name),this.isLocked=t.isLocked,this.hasUpdates=t.hasUpdates||!1},s=[{name:"store",isLocked:!1},{name:"research",isLocked:!0,hasUpdates:!0}];exports.instantiateTabs=function(e){void 0===e&&(e=JSON.parse(localStorage.getItem("tabs"))||s);var i=[];e.forEach(function(e){i.push(new a(e))}),t.InstanceState.tabs=i};
},{"./utils":"GUxD","./State":"ibrd"}],"JjQV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.showTooltip=exports.hideTooltip=void 0;var e=require("./constants"),i=require("./utils"),t=require("./State");exports.hideTooltip=function(){e.tooltipWrapperEl.innerHTML="",e.tooltipWrapperEl.classList.remove("visible")},exports.showTooltip=function(n,o){e.tooltipWrapperEl.classList.add("visible");var r="";switch(o.type){case"building":var p=i.getGeometricSequencePrice(o.building);r+="\n                <div class='tooltip-container tooltip-building tooltip-building-"+o.building.codeName+"'>\n                    <div class='tooltip-top'>\n                        <img src='./images/building-"+o.building.codeName+".png'/>\n                        <div class='tooltip-target-name-container'>\n                            <p>"+o.building.name+"</p>\n                            <small>[ "+o.building.name+" Production Multiplier: <strong>"+o.building.productionMultiplier+"x</strong> ]</small>\n                        </div>\n                        <p class='price' style='"+(t.State.inventory.ores<p?"color: crimson":"")+"'>\n                            <img src='./images/ore.png'/>\n                            "+i.beautifyNumber(p)+"\n                        </p>\n                    </div>\n                    <div class='tooltip-middle'>\n                        <p>"+o.building.desc+"</p>",o.building.owned>0&&(r+="\n                    <div class='stats'>\n                            <p>Each "+o.building.name+" generates <strong>"+i.beautifyNumber(o.building.baseProduction*o.building.productionMultiplier)+"</strong> ores per second.</p>\n                            <p><strong>"+o.building.owned+" </strong>"+(o.building.owned>1?o.building.namePlural+" are":o.building.name+" is")+" generating <strong>"+i.beautifyNumber(o.building.owned*(o.building.baseProduction*o.building.productionMultiplier))+"</strong> ore per second.</p>\n                            <p class='building-percentage'>"+o.building.name+"s are currently generating <strong>"+i.beautifyNumber(i.getPercentage(o.building.owned*(o.building.baseProduction*o.building.productionMultiplier),t.State.ops))+"%</strong> of your total OpS</p>\n                    </div>"),r+="\n                    </div>\n                    <div class='tooltip-bottom'>\n                        <p>"+o.building.flavorText+"</p>\n                    </div>\n                </div>\n            ";break;case"upgrade":r+="\n                <div class='tooltip-container tooltip-upgrade tooltip-upgrade-"+o.upgrade.codeName+"'>\n                    <div class='tooltip-top'>\n                        <img src='./images/upgrade-"+o.upgrade.codeName+".png'/>\n                        <p>"+o.upgrade.name+"</p>\n                        <p class='price' style='"+(t.State.inventory.ores<o.upgrade.price?"color: crimson":"")+"'>\n                            <img src='./images/ore.png'/>\n                            "+i.beautifyNumber(o.upgrade.price)+"\n                        </p>\n                    </div>\n                    <div class='tooltip-middle'>\n                        <p>"+o.upgrade.desc+"</p>\n                    </div>\n                    <div class='tooltip-bottom'>\n                        <p>"+o.upgrade.flavorText+"</p>\n                    </div>\n                </div>\n            ";break;case"researchUpgrade":var l=o.researchUpgrade;r+="\n                <div class='tooltip-container tooltip-researchUpgrade tooltip-researchUpgrade-"+l.codeName+"'>\n                    <div class='tooltip-top'>\n                        <img src='./images/researchUpgrade-"+l.codeName+".png'/>\n                        <p>"+l.name+"</p>\n                    </div>\n                    <div class='tooltip-middle'>\n                        <p>"+l.desc+"</p>\n                        <div class='cost'>\n                            <p>Requires:</p>\n                            <p>Refined Ores: "+l.cost+"</p>\n                            <p>Power Needed: "+i.beautifyNumber(l.powerNeeded)+"</p>\n                        </div>\n                    </div>\n                    ",l.flavorText&&(r+="\n                    <div class='tooltip-bottom'>\n                        <p>"+l.flavorText+"</p>\n                    </div>"),r+="\n                </div>\n            ";break;default:console.log("no tooltip yet for this type:",o.type)}e.tooltipWrapperEl.innerHTML=r,o.type;e.tooltipWrapperEl.style.width="375px",e.tooltipWrapperEl.style.top=n.clientY-e.tooltipWrapperEl.getBoundingClientRect().height/2+"px",e.tooltipWrapperEl.style.left=e.gameContainerRight.getBoundingClientRect().left-375-20+"px"};
},{"./constants":"FCax","./utils":"GUxD","./State":"ibrd"}],"lyKV":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(){"use strict";var n=function(){this.init()};n.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||l(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||l(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||o,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,l()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(a){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var o=new Audio;o._unlocked=!0,e._releaseHtml5Audio(o)}catch(n){e.noAudio=!0;break}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var i=e._howls[r]._getSoundIds(),a=0;a<i.length;a++){var s=e._howls[r]._soundById(i[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||o;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new n,r=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(e){var t=this;return o.ctx||l(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,r;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(r=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new i(this),this._webAudio&&s(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var i=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(i++,r=n._sounds[a]._id);1===i?e=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(r&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var d=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),_=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-d),l=1e3*_/Math.abs(s._rate),c=n._sprite[e][0]/1e3,p=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var f=function(){s._paused=!1,s._seek=d,s._start=c,s._stop=p,s._loop=!(!s._loop&&!n._sprite[e][2])};if(!(d>=p)){var h=s._node;if(n._webAudio){var m=function(){n._playLock=!1,f(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;h.gain.setValueAtTime(e,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===h.bufferSource.start?s._loop?h.bufferSource.noteGrainOn(0,d,86400):h.bufferSource.noteGrainOn(0,d,_):s._loop?h.bufferSource.start(0,d,86400):h.bufferSource.start(0,d,_),l!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),l)),t||setTimeout(function(){n._emit("play",s._id),n._loadQueue()},0)};"running"===o.state&&"interrupted"!==o.ctx.state?m():(n._playLock=!0,n.once("resume",m),n._clearTimer(s._id))}else{var v=function(){h.currentTime=d,h.muted=s._muted||n._muted||o._muted||h.muted,h.volume=s._volume*o.volume(),h.playbackRate=s._rate;try{var r=h.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,f(),r.then(function(){n._playLock=!1,h._unlocked=!0,t||(n._emit("play",s._id),n._loadQueue())}).catch(function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0})):t||(n._playLock=!1,f(),n._emit("play",s._id),n._loadQueue()),h.playbackRate=s._rate,h.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),l):(n._endTimers[s._id]=function(){n._ended(s),h.removeEventListener("ended",n._endTimers[s._id],!1)},h.addEventListener("ended",n._endTimers[s._id],!1))}catch(i){n._emit("playerror",s._id,i)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===h.src&&(h.src=n._src,h.load());var A=window&&window.ejecta||!h.readyState&&o._navigator.isCocoonJS;if(h.readyState>=3||A)v();else{n._playLock=!0;var y=function(){v(),h.removeEventListener(o._canPlayEvent,y,!1)};h.addEventListener(o._canPlayEvent,y,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o]);var r=t._soundById(n[o]);if(r&&!r._paused&&(r._seek=t.seek(n[o]),r._rateSeek=0,r._paused=!0,t._stopFade(n[o]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var o=n._getSoundIds(e),r=0;r<o.length;r++){n._clearTimer(o[r]);var i=n._soundById(o[r]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(o[r]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),t||n._emit("stop",i._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),i=0;i<r.length;i++){var a=n._soundById(r[i]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||e),n._emit("mute",a._id))}return n},volume:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]?r._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0]):i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10)),!(void 0!==e&&e>=0&&e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var a=0;a<t.length;a++)(n=r._soundById(t[a]))&&(n._volume=e,i[2]||r._stopFade(t[a]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,n,r)}}),i;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),i.volume(e,r);for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if(r||i._stopFade(a[s]),i._webAudio&&!u._muted){var d=o.ctx.currentTime,_=d+n/1e3;u._volume=e,u._node.gain.setValueAtTime(e,d),u._node.gain.linearRampToValueAtTime(t,_)}i._startFadeInterval(u,e,t,n,a[s],void 0===r)}}return i},_startFadeInterval:function(e,t,n,o,r,i){var a=this,s=t,u=n-t,d=Math.abs(u/.01),_=Math.max(4,d>0?o/d:o),l=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var r=(Date.now()-l)/o;l=Date.now(),s+=u*r,s=u<0?Math.max(n,s):Math.min(n,s),s=Math.round(100*s)/100,a._webAudio?e._volume=s:a.volume(s,e._id,!0),i&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))},_)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,o=arguments;if(0===o.length)return this._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=this._soundById(parseInt(o[0],10)))&&n._loop;e=o[0],this._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var r=this._getSoundIds(t),i=0;i<r.length;i++)(n=this._soundById(r[i]))&&(n._loop=e,this._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return this},rate:function(){var e,t,n,r=this,i=arguments;if(0===i.length)t=r._sounds[0]._id;else if(1===i.length){r._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(n=r._soundById(t))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var a=0;a<t.length;a++)if(n=r._soundById(t[a])){r.playing(t[a])&&(n._rateSeek=r.seek(t[a]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart),n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):n._node&&(n._node.playbackRate=e);var s=r.seek(t[a]),u=1e3*((r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-s)/Math.abs(n._rate);!r._endTimers[t[a]]&&n._paused||(r._clearTimer(t[a]),r._endTimers[t[a]]=setTimeout(r._ended.bind(r,n),u)),r._emit("rate",n._id)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){n._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return n;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var i=n._soundById(t);if(i){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var a=n.playing(t)?o.ctx.currentTime-i._playStart:0,s=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(s+a*Math.abs(i._rate))}return i._node.currentTime}var u=n.playing(t);u&&n.pause(t,!0),i._seek=e,i._ended=!1,n._clearTimer(t),n._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=e);var d=function(){n._emit("seek",t),u&&n.play(t,!0)};if(u&&!n._webAudio){var _=function(){n._playLock?setTimeout(_,0):d()};setTimeout(_,0)}else d()}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1),o._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var r=o._howls.indexOf(e);r>=0&&o._howls.splice(r,1);var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===e._src||e._src.indexOf(o._howls[n]._src)>=0){i=!1;break}return a&&i&&delete a[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,o){var r=this["_on"+e];return"function"==typeof t&&r.push(o?{id:n,fn:t,once:o}:{id:n,fn:t}),this},off:function(e,t,n){var o=this["_on"+e],r=0;if("number"==typeof t&&(n=t,t=null),t||n)for(r=0;r<o.length;r++){var i=n===o[r].id;if(t===o[r].fn&&i||!t&&i){o.splice(r,1);break}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(r=0;r<a.length;r++)0===a[r].indexOf("_on")&&Array.isArray(this[a[r]])&&(this[a[r]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var o=this["_on"+e],r=o.length-1;r>=0;r--)o[r].id&&o[r].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,o[r].fn),0),o[r].once&&this.off(e,o[r].fn,o[r].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),r)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),o._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new i(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=a[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){var t=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=o._scratchBuffer}catch(n){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(e){this._parent=e,this.init()};i.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=o._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(t,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):o.noAudio||(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload=!0===e._preload?"auto":e._preload,this._node.volume=t*o.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)}};var a={},s=function(e){var t=e._src;if(a[t])return e._duration=a[t].duration,void _(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);d(o.buffer,e)}else{var i=new XMLHttpRequest;i.open(e._xhr.method,t,!0),i.withCredentials=e._xhr.withCredentials,i.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){i.setRequestHeader(t,e._xhr.headers[t])}),i.onload=function(){var t=(i.status+"")[0];"0"===t||"2"===t||"3"===t?d(i.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete a[t],e.load())},u(i)}},u=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(a[t._src]=e,_(t,e)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(r).catch(n):o.ctx.decodeAudioData(e,r,n)},_=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},l=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(i){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!r&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};"function"==typeof e&&e.amd&&e([],function(){return{Howler:o,Howl:r}}),"undefined"!=typeof exports&&(exports.Howler=o,exports.Howl=r),void 0!==t?(t.HowlerGlobal=n,t.Howler=o,t.Howl=r,t.Sound=i):"undefined"!=typeof window&&(window.HowlerGlobal=n,window.Howler=o,window.Howl=r,window.Sound=i)}(),function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,o,r,i){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,o="number"!=typeof o?a[3]:o,r="number"!=typeof r?a[4]:r,i="number"!=typeof i?a[5]:i,"number"!=typeof e?a:(this._orientation=[e,t,n,o,r,i],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,o,r,i),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(e,n)}}),o;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0]}for(var i=o._getSoundIds(n),a=0;a<i.length;a++){var s=o._soundById(i[a]);if(s){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,r),"spatial"===r?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),o._emit("stereo",s._id)}}return o},Howl.prototype.pos=function(e,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,n,o,r)}}),i;if(n="number"!=typeof n?0:n,o="number"!=typeof o?-.5:o,void 0===r){if("number"!=typeof e)return i._pos;i._pos=[e,n,o]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,n,o],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):u._panner.setPosition(e,n,o)),i._emit("pos",u._id)}}return i},Howl.prototype.orientation=function(e,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,n,o,r)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,o="number"!=typeof o?i._orientation[2]:o,void 0===r){if("number"!=typeof e)return i._orientation;i._orientation=[e,n,o]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,n,o],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),t(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):u._panner.setOrientation(e,n,o)),i._emit("orientation",u._id)}}return i},Howl.prototype.pannerAttr=function(){var e,n,o,r=arguments;if(!this._webAudio)return this;if(0===r.length)return this._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(o=this._soundById(parseInt(r[0],10)))?o._pannerAttr:this._pannerAttr;e=r[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:this._panningModel})}else 2===r.length&&(e=r[0],n=parseInt(r[1],10));for(var i=this._getSoundIds(n),a=0;a<i.length;a++)if(o=this._soundById(i[a])){var s=o._pannerAttr;s={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:s.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:s.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:s.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:s.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:s.panningModel};var u=o._panner;u?(u.coneInnerAngle=s.coneInnerAngle,u.coneOuterAngle=s.coneOuterAngle,u.coneOuterGain=s.coneOuterGain,u.distanceModel=s.distanceModel,u.maxDistance=s.maxDistance,u.refDistance=s.refDistance,u.rolloffFactor=s.rolloffFactor,u.panningModel=s.panningModel):(o._pos||(o._pos=this._pos||[0,0,-.5]),t(o,"spatial"))}return this},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}();
},{}],"Crhs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sounds=void 0;var e=require("howler");exports.Sounds={oreHit:new e.Howl({src:["./sounds/oreHit.wav"],volume:.2}),oreWeakSpotHit:new e.Howl({src:["./sounds/oreWeakSpotHit.wav"],volume:.2}),orePercentageLost:new e.Howl({src:["./sounds/orePercentageLost.wav"],volume:.2}),oreDestroyed:new e.Howl({src:["./sounds/oreDestroyed.wav"],volume:.2}),storeItemHover:new e.Howl({src:["./sounds/storeItemHover.wav"],volume:.2}),buy:new e.Howl({src:["./sounds/buy.wav"],volume:.2}),notEnough:new e.Howl({src:["./sounds/notEnough.wav"],volume:.2}),researchUpgradeStart:new e.Howl({src:["./sounds/researchUpgradeStart.wav"],volume:.2}),misc:new e.Howl({src:["./sounds/misc.wav"],volume:.1})};
},{"howler":"lyKV"}],"xBG6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.instantiateBuildings=void 0;var e=require("./utils"),a=require("./index"),n=require("./State"),i=require("./Updates"),o=require("./Tooltip"),d=require("./RisingText"),t=require("./Sounds"),s=0,r=function(r){var c=this;this.id=s,this.name=r.name,this.codeName=e.getCodeName(r.name),this.namePlural=r.namePlural,this.desc=r.desc,this.flavorText=r.flavorText,this.currentPrice=r.currentPrice||r.basePrice,this.basePrice=r.basePrice,this.priceScale=r.priceScale,this.baseProduction=r.baseProduction,this.productionMultiplier=r.productionMultiplier||1,this.isLocked=r.isLocked,this.isHidden=r.isHidden,this.owned=r.owned||0,this.onBuy=r.onBuy||null,s+=1,this.buy=function(s){a.spend(e.getGeometricSequencePrice(c))&&(c.owned+=n.InstanceState.buyAmount,c.currentPrice=c.basePrice*Math.pow(c.priceScale,c.owned),a.updateOPS(),t.Sounds.buy.play(),i.UpdatesState.updateOres=!0,i.UpdatesState.updateTabContent=!0,u(c.id),c.onBuy&&c.onBuy.unlockUpgrade&&c.onBuy.unlockUpgrade.forEach(function(e){c.owned>=e.amountNeeded&&(n.State.upgrades[e.name].isLocked=!1,i.UpdatesState.updateTabContent=!0)}),d.generateRisingText(s,"buy"),o.showTooltip(s,{type:"building",building:c}))},this.mousemove=function(e){return o.showTooltip(e,{type:"building",building:c})}},u=function(a){var i=e.sortObj(n.State.buildings,s),o=i[a+1][1],d=i[a+3][1];o&&(o.isLocked=!1),d&&(d.isHidden=!1)},c=[{name:"School",namePlural:"Schools",desc:"Teach students about the wonders of ore.",flavorText:"Jesus christ Marie, they're minerals!",baseProduction:.5,basePrice:30,priceScale:1.07,isLocked:!1,isHidden:!1,onBuy:{unlockUpgrade:[{name:"Composition Notebooks",amountNeeded:1},{name:"No. 2 Pencil",amountNeeded:5},{name:"3 Ring Binder",amountNeeded:10},{name:"Looseleaf",amountNeeded:20},{name:"Schoolbag",amountNeeded:50},{name:"Fresh Pink Eraser",amountNeeded:100},{name:"Gum",amountNeeded:200},{name:"Report Card",amountNeeded:400}]}},{name:"Farm",namePlural:"Farms",desc:"Cultivate the lands for higher quality ores.",flavorText:"This totally makes sense...",baseProduction:3,basePrice:180,priceScale:1.15,isLocked:!0,isHidden:!1,onBuy:{unlockUpgrade:[{name:"Manure Spreader",amountNeeded:1},{name:"Pitchfork",amountNeeded:5},{name:"Tractor",amountNeeded:10},{name:"Rotary Cutter",amountNeeded:20},{name:"Hoe",amountNeeded:50},{name:"Baler",amountNeeded:100},{name:"Sickle",amountNeeded:200},{name:"Scythe",amountNeeded:400}]}},{name:"Quarry",namePlural:"Quarries",desc:"Designated mining area.",flavorText:"Diggy diggy hole.",baseProduction:20,basePrice:1300,priceScale:1.15,isLocked:!0,isHidden:!1,onBuy:{unlockUpgrade:[{name:"Floodlights",amountNeeded:1},{name:"Twill Rope",amountNeeded:5},{name:"Wooden Compass",amountNeeded:10},{name:"Ore Filter",amountNeeded:20},{name:"Waterproof Tape",amountNeeded:50},{name:"Metallic Compass",amountNeeded:100},{name:"Miners Mask",amountNeeded:200},{name:"Cape Chisel",amountNeeded:400}]}},{name:"Church",namePlural:"Churches",desc:"Praise to ye Old Ore Gods.",flavorText:"In ore name we pray, amen.",baseProduction:105,basePrice:11800,priceScale:1.15,isLocked:!0,isHidden:!0,onBuy:{unlockUpgrade:[{name:"Scripture Reading",amountNeeded:1},{name:"Communion",amountNeeded:5},{name:"Worship Session",amountNeeded:10},{name:"7th Day",amountNeeded:20},{name:"Eden Apple",amountNeeded:50},{name:"Apocalypse",amountNeeded:100},{name:"Judgement Day",amountNeeded:200},{name:"Rapture",amountNeeded:400}]}},{name:"Factory",namePlural:"Factories",desc:"Manufacture your ores.",flavorText:"Assembly line this SH%* up!",baseProduction:525,basePrice:125e3,priceScale:1.15,isLocked:!0,isHidden:!0,onBuy:{unlockUpgrade:[{name:"Rubber Conveyor Belt",amountNeeded:1},{name:"Floppy Squiggle Tubes",amountNeeded:5},{name:"Clicky Squish Buttons",amountNeeded:10},{name:"Metallic Magnetic Panels",amountNeeded:20},{name:"Hydroponic Auxilleration",amountNeeded:50}]}},{name:"Crypt",namePlural:"Crypts",desc:"Raise dead ores from the graves.",flavorText:"Spooky dooky ores.",baseProduction:3675,basePrice:2e6,priceScale:1.15,isLocked:!0,isHidden:!0},{name:"Hospital",namePlural:"Hospitals",desc:"Heal the poor ol damaged ores.",flavorText:"An apple a day keeps the ore cancer away.",baseProduction:18e3,basePrice:236e5,priceScale:1.15,isLocked:!0,isHidden:!0},{name:"Citadel",namePlural:"Citadels",desc:"wip",flavorText:"wip",baseProduction:148e5,basePrice:28e8,priceScale:1.15,isLocked:!0,isHidden:!0},{name:"Xeno Spaceship",namePlural:"Xeno Spaceships",desc:"wip",flavorText:"wip",baseProduction:1922e5,basePrice:495e8,priceScale:1.15,isLocked:!0,isHidden:!0},{name:"Sky Castle",namePlural:"Sky Castles",desc:"Use magic beans to reach an egg based source of ores.",flavorText:"wip",baseProduction:38e8,basePrice:124e10,priceScale:1.15,isLocked:!0,isHidden:!0},{name:"Eon Portal",namePlural:"Eon Portals",desc:"Steal ore from your past and future self.",flavorText:"wip",baseProduction:4515e7,basePrice:1858e10,priceScale:1.15,isLocked:!0,isHidden:!0},{name:"Sacred Mine",namePlural:"Sacred Mines",desc:"wip",flavorText:"wip",baseProduction:6919e8,basePrice:2972e11,priceScale:1.15,isLocked:!0,isHidden:!0},{name:"O.A.R.D.I.S.",namePlural:"O.A.R.D.I.S.",desc:"wip",flavorText:"wip",baseProduction:173e11,basePrice:8915e12,priceScale:1.15,isLocked:!0,isHidden:!0},{name:"Final Destination",namePlural:"Final Destinations",desc:"The Final Destination.",flavorText:"Thank you so much for playing <3.",baseProduction:1e18,basePrice:1e33,priceScale:1.15,isLocked:!0,isHidden:!0}];exports.instantiateBuildings=function(){var a=JSON.parse(localStorage.getItem("state")),i={};if(a){if(!e.isObjEmpty(a.buildings))for(var o in a.buildings)i[o]=new r(a.buildings[o])}else c.forEach(function(e){i[e.name]=new r(e)});n.State.buildings=i,console.log("buildings",n.State.buildings)};
},{"./utils":"GUxD","./index":"KqmS","./State":"ibrd","./Updates":"owfE","./Tooltip":"JjQV","./RisingText":"UmE0","./Sounds":"Crhs"}],"vNBS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.instantiateResearchUpgrades=exports.unlockResearchUpgrade=void 0;var e=require("./utils"),t=require("./State"),r=require("."),s=require("./Updates"),a=require("./RisingText"),o=require("./Tooltip"),n=require("./Sounds"),i=1e3,c=6e4,d=60*c,p=function(i){var c=this;this.name=i.name,this.codeName=e.getCodeName(i.name),this.desc=i.desc,this.flavorText=i.flavorText||null,this.powerNeeded=i.powerNeeded,this.cost=i.cost,this.requires=i.requires||[],this.isLocked=i.isLocked,this.isInProgress=i.isInProgress||!1,this.isNew=i.isNew||!0,this.isOwned=i.isOwned||!1,this.isRepeatable=i.isRepeatable||!1,this.isRepeatable&&(this.priceIncrease=i.priceIncrease),this.onComplete=i.onComplete||null,this.complete=function(){c.completedOn=new Date,c.isInProgress=!1,s.UpdatesState.updateTabContent=!0,s.UpdatesState.updateTabs=!0,t.State.research.currentProgress=0,t.State.research.inProgress=!1,t.State.research.currentUpgrade=c,r.completeResearchUpgrade(c.codeName),c.isRepeatable&&(c.powerNeeded*=c.priceIncrease),c.onComplete&&c.onComplete.unlockResearchUpgrade&&c.onComplete.unlockResearchUpgrade.forEach(function(e){exports.unlockResearchUpgrade(e,c.codeName)})},this.start=function(){console.log("starting a research upgrade"),n.Sounds.researchUpgradeStart.play(),c.isInProgress=!0,c.startedOn=new Date,s.UpdatesState.updateTabContent=!0,s.UpdatesState.updateTabs=!0,t.State.research.currentProgress=0,t.State.research.inProgress=!0,t.State.research.currentUpgrade=c},this.buy=function(e){console.log("buying a research upgrade",e),t.State.research.inProgress||r.spend(c.cost,"refined")&&(a.generateRisingText(e,"buy"),o.hideTooltip(),c.start())},this.removeNew=function(t){c.isNew=!1,t.target.children[1]&&e.removeEl(t.target.children[1])}};exports.unlockResearchUpgrade=function(e,r){var a=t.State.researchUpgrades[e],o=!0;if(a.requires)for(var n in a.requires)n===r&&(a.requires[n]=!0),!1===a.requires[n]&&(o=!1);o&&(a.isLocked=!1,"research"===t.InstanceState.selectedTab?s.UpdatesState.updateTabContent=!0:(t.InstanceState.tabs[1].hasUpdates=!0,s.UpdatesState.updateTabs=!0))};var h=[{name:"Fragility Spectacles",desc:'Allows you to spot "weak spots" within the ore. Hitting the weak spot generates 5x the normal amount.',flavorText:"I can see... I can FIGHT!",powerNeeded:40,cost:0,isLocked:!1,onComplete:{unlockResearchUpgrade:["Research Power Up"]}},{name:"Quest Board",desc:"Onwards to adventure! Go on quests to find greater rewards and even mysterious artifacts!",flavorText:"Fetch quests are the greatest aren't they?",powerNeeded:2e4,cost:1,isLocked:!1},{name:"Research Power Up",desc:"Increase maximum research power by a set amount",powerNeeded:100,cost:0,isLocked:!0,requires:{fragilitySpectacles:!1},isRepeatable:!0,priceIncrease:1.75},{name:"Refinement",desc:"Allows for... REFINEMENT!",powerNeeded:5e3,cost:0,isLocked:!0}];exports.instantiateResearchUpgrades=function(){var r=JSON.parse(localStorage.getItem("state")),s={};if(r){if(!e.isObjEmpty(r.researchUpgrades))for(var a in r.researchUpgrades)s[a]=new p(r.researchUpgrades[a])}else h.forEach(function(e){s[e.name]=new p(e)});t.State.researchUpgrades=s};
},{"./utils":"GUxD","./State":"ibrd",".":"KqmS","./Updates":"owfE","./RisingText":"UmE0","./Tooltip":"JjQV","./Sounds":"Crhs"}],"noW9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Toast=void 0;var e=require("./State"),t=require("./utils"),n=require("./constants"),s=0;exports.Toast=function(i,a){var o=this,r=t.createEl("div",["toast","toast-"+s]);switch(this.id=s,this.self=r,this.close=function(){o.self.addEventListener("transitionend",function(){return t.removeEl(o.self)}),o.self.classList.add("close")},e.InstanceState.toasts.push(this),s++,i){case"achievement":r.classList.add("toast-achievement");var c=t.createEl("svg");c.innerHTML='\n                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="40" height="40" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z"/>\n                    <line x1="18" y1="6" x2="6" y2="18" />\n                    <line x1="6" y1="6" x2="18" y2="18" />\n                </svg>\n            ',c.addEventListener("click",function(){return o.close()}),r.innerHTML="\n                <div class='toast-top'>\n                    <img src='https://via.placeholder.com/32/'>\n                    <h2 class='achievement-name'>"+a.name+"</h2>\n                </div>\n                <div class='toast-middle'>"+a.desc+"</div>\n            ",r.append(c),n.toastsContainerLeftEl.append(r);break;case"notification":n.toastsContainerRightEl.append(r);break;default:console.log("type not recognized",i)}};
},{"./State":"ibrd","./utils":"GUxD","./constants":"FCax"}],"ctio":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.instantiateAchievements=void 0;var e=require("./utils"),a=require("./Toast"),o=require("./State"),c=function(o){var c=this;this.name=o.name,this.codeName=e.getCodeName(o.name),this.desc=o.desc,this.isWon=o.won||!1,this.win=function(){c.isWon||(c.isWon=!0,new a.Toast("achievement",c))}},n=[{name:"Newbie Miner",desc:"Break your first rock"},{name:"Novice Miner",desc:"Break 10 rocks"},{name:"Intermediate Miner",desc:"Break 25 rocks"},{name:"Advanced Miner",desc:"Break 50 rocks"},{name:"Master Miner",desc:"Break 100 rocks"},{name:"Chief Miner",desc:"Break 200 rocks"},{name:"Exalted Miner",desc:"Break 500 rocks"},{name:"God Miner",desc:"Break 1000 rocks"},{name:"Combo Baby",desc:"Reach a 5 hit combo"},{name:"Combo Pleb",desc:"Reach a 20 hit combo"},{name:"Combo Squire",desc:"Reach a 50 hit combo"},{name:"Combo Knight",desc:"Reach a 100 hit combo"},{name:"Combo King",desc:"Reach a 200 hit combo"},{name:"Combo Master",desc:"Reach a 350 hit combo"},{name:"Combo Devil",desc:"Reach a 666 hit combo"},{name:"Combo Jackpot",desc:"Reach a 777 hit combo"},{name:"Combo God",desc:"Reach a 1000 hit combo"},{name:"Combo Saiyan",desc:"Reach a 5000 hit combo"},{name:"Combo Saitama",desc:"Reach a 10000 hit combo"},{name:"Not Even A Scratch",desc:"Deal more than 100 damage from a hit"},{name:"Didnt Even Hurt",desc:"Deal more than 1,000 damage from a hit"},{name:"That Tickled",desc:"Deal more than 100,000 damage from a hit"},{name:"I Felt That",desc:"Deal more than 1,000,000 damage from a hit"},{name:"Ore-aid Stand",desc:"Reach 50 OpS"},{name:"Ore Store",desc:"Reach 10,000 OpS"},{name:"401k",desc:"Reach 401,000 OpS"},{name:"Retirement Plan",desc:"Reach 5,000,000 OpS"},{name:"Hedge Fund",desc:"1,000,000,000 OpS"}];exports.instantiateAchievements=function(){var a=JSON.parse(localStorage.getItem("state")),t={};if(a){if(!e.isObjEmpty(a.achievements))for(var m in a.achievements)t[m]=new c(a.achievements[m])}else n.forEach(function(e){t[e.name]=new c(e)});o.State.achievements=t};
},{"./utils":"GUxD","./Toast":"noW9","./State":"ibrd"}],"CODg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.schoolUpgrades=void 0,exports.schoolUpgrades=[{name:"Composition Notebooks",flavorText:"College ruled!",price:300,onBuy:{increaseBuildingProductionMultiplier:["School",1]}},{name:"No. 2 Pencil",flavorText:"Test ready!",price:1e3,onBuy:{increaseBuildingProductionMultiplier:["School",1]}},{name:"3 Ring Binder",flavorText:'Be the Lord of the Rings with our new 2.5" binder!',price:12e3,onBuy:{increaseBuildingProductionMultiplier:["School",1]}},{name:"Looseleaf",flavorText:'"Can I borrow a sheet?"',price:45e4,onBuy:{increaseBuildingProductionMultiplier:["School",1]}},{name:"Schoolbag",flavorText:"Break your back carrying on of these stylish bags!",price:55e5,onBuy:{increaseBuildingProductionMultiplier:["School",2]}},{name:"Fresh Pink Eraser",flavorText:"Never use this. Keep it pristine.",price:225e5,onBuy:{increaseBuildingProductionMultiplier:["School",1]}},{name:"Gum",flavorText:"With this, you'll be the most popular kid in the class.",price:62e7,onBuy:{increaseBuildingProductionMultiplier:["School",1]}},{name:"Hallpass",flavorText:"Wander the halls without a care in the world.",price:3e12,onBuy:{increaseBuildingProductionMultiplier:["School",1]}},{name:"Report Card",flavorText:"Determines your fate for the upcoming months.",price:82e12,onBuy:{increaseBuildingProductionMultiplier:["School",1]}}];
},{}],"NPP0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.farmUpgrades=void 0,exports.farmUpgrades=[{name:"Manure Spreader",flavorText:"The poop helps the ore mature.",price:950,onBuy:{increaseBuildingProductionMultiplier:["Farm",1]}},{name:"Pitchfork",flavorText:"Torches not included...",price:12500,onBuy:{increaseBuildingProductionMultiplier:["Farm",1]}},{name:"Tractor",flavorText:"Im in me mums tractor.",price:265e3,onBuy:{increaseBuildingProductionMultiplier:["Farm",1]}},{name:"Rotary Cutter",flavorText:"Not even grass can stop us now.",price:345e4,onBuy:{increaseBuildingProductionMultiplier:["Farm",1]}},{name:"Hoe",flavorText:"hehe...",price:69e6,onBuy:{increaseBuildingProductionMultiplier:["Farm",1]}},{name:"Baler",flavorText:'"Baler? I hardly know her."',price:4e8,onBuy:{increaseBuildingProductionMultiplier:["Farm",1]}},{name:"Sickle",flavorText:"For easy sickle-ing of course.",price:47003e5,onBuy:{increaseBuildingProductionMultiplier:["Farm",1]}},{name:"Scythe",flavorText:"It's like a sickle... but bigger.",price:7e10,onBuy:{increaseBuildingProductionMultiplier:["Farm",1]}}];
},{}],"kHdT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.quarryUpgrades=void 0,exports.quarryUpgrades=[{name:"Floodlights",flavorText:"Staring into one of them is like starting into a billion suns.",price:1900,onBuy:{increaseBuildingProductionMultiplier:["Quarry",1]}},{name:"Twill Rope",flavorText:"Study enuff...",price:11e3,onBuy:{increaseBuildingProductionMultiplier:["Quarry",1]}},{name:"Wooden Compass",flavorText:"Responds to ore magnetism.",price:51e4,onBuy:{increaseBuildingProductionMultiplier:["Quarry",1]}},{name:"Ore Filter",flavorText:"Less sorting, more ore.",price:7e6,onBuy:{increaseBuildingProductionMultiplier:["Quarry",1]}},{name:"Waterproof Tape",flavorText:"Poor mans Flex Tape",price:8e7,onBuy:{increaseBuildingProductionMultiplier:["Quarry",1]}},{name:"Metallic Compass",flavorText:"Looks cooler, does the same thing.",price:2105e5,onBuy:{increaseBuildingProductionMultiplier:["Quarry",1]}},{name:"Miners Mask",flavorText:"Asbestos be gone!",price:5e9,onBuy:{increaseBuildingProductionMultiplier:["Quarry",1]}},{name:"Cape Chisel",flavorText:"Faster than mining!",price:27e9,onBuy:{increaseBuildingProductionMultiplier:["Quarry",1]}},{name:"Ore Splitter",flavorText:"Right down the middle",price:6e11,onBuy:{increaseBuildingProductionMultiplier:["Quarry",1]}},{name:"Laser Drill",flavorText:"tbd",price:63e11,onBuy:{increaseBuildingProductionMultiplier:["Quarry",1]}}];
},{}],"mt6p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.churchUpgrades=void 0,exports.churchUpgrades=[{name:"Scripture Reading",flavorText:"Read the words of our l-ore-d and savior.",price:6e4,onBuy:{increaseBuildingProductionMultiplier:["Church",1]}},{name:"Communion",flavorText:"Note: Not communism.",price:74e4,onBuy:{increaseBuildingProductionMultiplier:["Church",1]}},{name:"Worship Session",flavorText:"More like W-ore-ship... haha...",price:28e5,onBuy:{increaseBuildingProductionMultiplier:["Church",1]}},{name:"7th Day",flavorText:"You would think a day of worship is one less day of work but somehow it works out to more ore!",price:62e6,onBuy:{increaseBuildingProductionMultiplier:["Church",1]}},{name:"Eden Apple",flavorText:"You can't resist this forbidden fruit.",price:777e6,onBuy:{increaseBuildingProductionMultiplier:["Church",1]}},{name:"Apocalypse",flavorText:"Hell on earth.",price:82e8,onBuy:{increaseBuildingProductionMultiplier:["Church",4]}},{name:"Judgement Day",flavorText:"It's the end of the world.",price:32e9,onBuy:{increaseBuildingProductionMultiplier:["Church",3]}},{name:"Rapture",flavorText:"Are you saved?",price:7e11,onBuy:{increaseBuildingProductionMultiplier:["Church",3]}},{name:"Chaos",flavorText:"...",price:245e10,onBuy:{increaseBuildingProductionMultiplier:["Church",2]}},{name:"Satanic Ritual",flavorText:"Sacrifices are the only way to appease the demons.",price:33e12,onBuy:{increaseBuildingProductionMultiplier:["Church",2]}}];
},{}],"QSEk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.factoryUpgrades=void 0,exports.factoryUpgrades=[{name:"Rubber Conveyor Belt",flavorText:"These moves the things to there, that's all I know.",price:3e4,onBuy:{increaseBuildingProductionMultiplier:["Factory",1]}},{name:"Floppy Squiggle Tubes",flavorText:"If I could tell you what these were for you'd buy twice as many.",price:3e5,onBuy:{increaseBuildingProductionMultiplier:["Factory",1]}},{name:"Clicky Squish Buttons",flavorText:"These go next to the Squishy Click Buttons.",price:44e6,onBuy:{increaseBuildingProductionMultiplier:["Factory",1]}},{name:"Metallic Magnetic Panels",flavorText:"These are actually for my fridge.",price:8e8,onBuy:{increaseBuildingProductionMultiplier:["Factory",1]}},{name:"Hydroponic Auxilleration",flavorText:"Aquaman is here to stay.",price:53e8,onBuy:{increaseBuildingProductionMultiplier:["Factory",1]}}];
},{}],"lacP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.upgrades=void 0;var r=require("./schoolUpgrades"),e=require("./farmUpgrades"),a=require("./quarryUpgrades"),s=require("./churchUpgrades"),p=require("./factoryUpgrades");exports.upgrades={schoolUpgrades:r.schoolUpgrades,farmUpgrades:e.farmUpgrades,quarryUpgrades:a.quarryUpgrades,churchUpgrades:s.churchUpgrades,factoryUpgrades:p.factoryUpgrades};
},{"./schoolUpgrades":"CODg","./farmUpgrades":"NPP0","./quarryUpgrades":"kHdT","./churchUpgrades":"mt6p","./factoryUpgrades":"QSEk"}],"ypIX":[function(require,module,exports) {
"use strict";var e=this&&this.__spreadArrays||function(){for(var e=0,r=0,i=arguments.length;r<i;r++)e+=arguments[r].length;var t=Array(e),a=0;for(r=0;r<i;r++)for(var n=arguments[r],s=0,u=n.length;s<u;s++,a++)t[a]=n[s];return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.instantiateUpgrades=void 0;var r=require("./utils"),i=require("./State"),t=require("./Tooltip"),a=require("./upgrades/index"),n=require("."),s=require("./Updates"),u=require("./Sounds"),o=require("./RisingText"),d=function(e){var a=this;this.name=e.name,this.codeName=r.getCodeName(e.name),this.desc=e.desc||p(e),this.flavorText=e.flavorText,this.price=e.price,this.onBuy=e.onBuy,this.isLocked=!1!==e.isLocked,this.isOwned=(e.isOwned,!1),this.buy=function(e){if(n.spend(a.price)){a.isOwned=!0,u.Sounds.buy.play(),o.generateRisingText(e,"buy"),a.onBuy&&a.onBuy.increaseBuildingProductionMultiplier&&(i.State.buildings[a.onBuy.increaseBuildingProductionMultiplier[0]].productionMultiplier+=a.onBuy.increaseBuildingProductionMultiplier[1],s.UpdatesState.updateOPS=!0);var t=e.target,d=r.select(".upgrades-container");r.removeEl(t),r.isElEmpty(d)&&(s.UpdatesState.updateTabContent=!0)}},this.mousemove=function(e){return t.showTooltip(e,{type:"upgrade",upgrade:a})}},p=function(e){return"Increases the production multiplier of "+i.State.buildings[e.onBuy.increaseBuildingProductionMultiplier[0]].namePlural+" by "+e.onBuy.increaseBuildingProductionMultiplier[1]},l=e(a.upgrades.schoolUpgrades,a.upgrades.farmUpgrades,a.upgrades.quarryUpgrades,a.upgrades.churchUpgrades,a.upgrades.factoryUpgrades);exports.instantiateUpgrades=function(){var e=JSON.parse(localStorage.getItem("state")),t={};if(e){if(!r.isObjEmpty(e.upgrades))for(var a in e.upgrades)t[a]=new d(e.upgrades[a])}else l.forEach(function(e){t[e.name]=new d(e)});i.State.upgrades=t};
},{"./utils":"GUxD","./State":"ibrd","./Tooltip":"JjQV","./upgrades/index":"lacP",".":"KqmS","./Updates":"owfE","./Sounds":"Crhs","./RisingText":"UmE0"}],"KqmS":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var r={};if(null!=a)for(var n in a)"default"!==n&&Object.hasOwnProperty.call(a,n)&&e(r,a,n);return t(r,a),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.completeResearchUpgrade=exports.updateOPS=exports.spend=void 0;var r=require("./State"),n=require("./Updates"),s=a(require("./constants")),o=require("./utils"),i=require("./OreParticle"),c=require("./RisingText"),d=require("./Tabs"),p=require("./Buildings"),u=require("./Tooltip"),l=require("./ResearchUpgrades"),S=require("./Achievements"),g=require("./Upgrades"),m=require("./Sounds"),v=function(e,t){void 0===t&&(t=!0),r.State.inventory.ores+=e,r.State.stats.oresEarned+=e,r.State.stats.lifetimeOresEarned+=e,r.State.stats.lifetimeOresEarned>=1e6&&r.State.researchUpgrades.Refinement.isLocked&&l.unlockResearchUpgrade("Refinement"),t&&b(e),n.UpdatesState.updateOres=!0};exports.spend=function(e,t){return void 0===t&&(t="ores"),r.State.inventory[t]>=e&&(r.State.inventory.ores-=e,!0)};var b=function(e){r.State.ore.hp-=e,r.State.ore.hp<=0&&h(),n.UpdatesState.updateOreSprite=!0,n.UpdatesState.updateOreHp=!0},h=function(){x(50),f(),r.State.ore.spriteType=o.getRandomNum(1,5),m.Sounds.oreDestroyed.play(),r.State.stats.rocksDestroyed++,1===r.State.stats.rocksDestroyed&&w("Newbie Miner"),10===r.State.stats.rocksDestroyed&&w("Novice Miner"),25===r.State.stats.rocksDestroyed&&w("Intermediate Miner"),50===r.State.stats.rocksDestroyed&&w("Advanced Miner"),100===r.State.stats.rocksDestroyed&&w("Master Miner"),200===r.State.stats.rocksDestroyed&&w("Chief Miner"),500===r.State.stats.rocksDestroyed&&w("Exalted Miner"),1e3===r.State.stats.rocksDestroyed&&w("God Miner"),3===r.State.stats.rocksDestroyed&&X("research")},f=function(){r.State.ore.maxHp*=1.16,r.State.ore.hp=r.State.ore.maxHp},E=function(){s.comboSignEl.classList.contains("visible")||ne(),s.comboSignNumberEl.innerHTML=""+r.State.stats.currentCombo},y=function(e,t){void 0===t&&(t=!1);var a=r.State.opc;t?(a*=r.State.stats.weakSpotMultiplier,r.State.stats.weakSpotClicks++,r.State.stats.currentCombo++,x(3),c.generateRisingText(e,"weakSpot",a),r.State.stats.currentCombo%5==0&&c.generateRisingText(e,"combo",r.State.stats.currentCombo),r.State.stats.currentCombo>r.State.stats.highestCombo&&(r.State.stats.highestCombo=r.State.stats.currentCombo),5===r.State.stats.currentCombo&&w("Combo Baby"),20===r.State.stats.currentCombo&&w("Combo Pleb"),50===r.State.stats.currentCombo&&w("Combo Squire"),100===r.State.stats.currentCombo&&w("Combo Knight"),200===r.State.stats.currentCombo&&w("Combo King"),350===r.State.stats.currentCombo&&w("Combo Master"),666===r.State.stats.currentCombo&&w("Combo Devil"),777===r.State.stats.currentCombo&&w("Combo Jackpot"),1e3===r.State.stats.currentCombo&&w("Combo God"),5e3===r.State.stats.currentCombo&&w("Combo Saiyan"),1e4===r.State.stats.currentCombo&&w("Combo Saitama"),L(),m.Sounds.oreWeakSpotHit.play()):(r.State.stats.currentCombo>0&&(r.State.stats.currentCombo=0),m.Sounds.oreHit.play(),x(1),c.generateRisingText(e,null,a)),a>=100&&w("Not Even A Scratch"),a>=1e3&&w("Didnt Even Hurt"),a>=1e5&&w("That Tickled"),a>=1e6&&w("I Felt That"),E(),v(a),i.generateOreParticles(e),r.State.stats.oreClicks++},L=function(){var e=o.select(".weak-spot");e||((e=o.createEl("div",["weak-spot"])).addEventListener("click",function(e){return y(e,!0)}),s.oreSpriteContainerEl.append(e));var t=o.getRandomNum(0,s.oreSpriteContainerEl.offsetWidth-20),a=o.getRandomNum(0,s.oreSpriteContainerEl.offsetHeight-20);e.style.left=t+"px",e.style.bottom=a+"px"},w=function(e){r.State.achievements[e].win()},x=function(e){r.State.generation.xp+=e,r.State.generation.xp>=r.State.generation.maxXp&&T(),n.UpdatesState.updateGenerationXp=!0},T=function(){r.State.generation.maxXp*=1.15,r.State.generation.xp=0,r.State.generation.lvOnRefine+=1,n.UpdatesState.updateGenerationLvOnRefine=!0},U=function(){var e=o.beautifyNumber(r.State.inventory.ores);r.State.ops>0&&(e+=" <span class='ops'>("+o.beautifyNumber(r.State.ops)+"/s)</span>"),s.topbarInventoryOresEl.innerHTML=""+e,n.UpdatesState.updateOres=!1},k=function(){switch(r.State.settings.oreHpType){case"percentage":s.oreHpEl.innerHTML=o.formatNumber(o.getPercentage(r.State.ore.hp,r.State.ore.maxHp))+"%";break;case"number":s.oreHpEl.innerHTML=o.formatNumber(r.State.ore.hp)+"/"+o.formatNumber(r.State.ore.maxHp);break;case"none":default:return}n.UpdatesState.updateOreHp=!1},C=function(){s.oreSpriteEl.src="./images/ore"+r.State.ore.spriteType+"-"+r.State.ore.spriteHp+".png";var e=o.getPercentage(r.State.ore.hp,r.State.ore.maxHp),t=Math.min(5,6-Math.ceil(e/20));r.State.ore.spriteHp!==t&&(m.Sounds.orePercentageLost.play(),r.State.ore.spriteHp=t,s.oreSpriteEl.src="./images/ore"+r.State.ore.spriteType+"-"+r.State.ore.spriteHp+".png",i.generateOreParticles(null,5)),n.UpdatesState.updateOreSprite=!1},O=function(){s.topbarInventoryGenerationLv.innerHTML=""+r.State.generation.lv,n.UpdatesState.updateGenerationLv=!1},P=function(){r.State.generation.lv<r.State.generation.lvOnRefine&&(s.topbarInventoryGenerationLvOnRefine.innerHTML="("+r.State.generation.lvOnRefine+")"),n.UpdatesState.updateGenerationLvOnRefine=!1},H=function(){s.topbarInventoryGenerationXpBarEl.style.width=o.getPercentage(r.State.generation.xp,r.State.generation.maxXp)+"%",n.UpdatesState.updateGenerationXp=!1};exports.updateOPS=function(){var e=0;for(var t in r.State.buildings){var a=r.State.buildings[t];e+=a.baseProduction*a.productionMultiplier*a.owned}r.State.ops=e,e>=50&&w("Ore-aid Stand"),e>=1e4&&w("Ore Store"),e>=401e3&&w("401k"),e>=5e6&&w("Retirement Plan"),e>=1e9&&w("Hedge Fund"),n.UpdatesState.updateOPS=!1};var M=function(e){r.InstanceState.buyAmount=e,n.UpdatesState.updateTabContent=!0},N=function(){for(var e in r.State.buildings){var t=r.State.buildings[e];if(!t.isHidden&&!t.isLocked){var a=document.querySelector(".building-"+t.codeName+" .building-price");r.State.inventory.ores>=o.getGeometricSequencePrice(t)?a.classList.contains("not-enough")&&a.classList.remove("not-enough"):a.classList.contains("not-enough")||a.classList.add("not-enough")}}for(var n in r.State.upgrades){var s=r.State.upgrades[n];if(!s.isLocked&&!s.isOwned){var i=document.querySelector(".upgrade-"+s.codeName);r.State.inventory.ores>=s.price?i.classList.contains("not-enough")&&i.classList.remove("not-enough"):i.classList.contains("not-enough")||i.classList.add("not-enough")}}},I=function(){if(!(r.State.research.currentProgress>=r.State.research.currentUpgrade.powerNeeded)){var e=r.State.research.power/r.State.settings.tick,t=Math.pow(e,1.2)*r.State.research.powerToOreRatio;exports.spend(t)&&(r.State.research.currentProgress+=e,R())}},R=function(){var e=o.select(".research-tab-progress-bar .bar"),t=o.getPercentage(r.State.research.currentProgress,r.State.research.currentUpgrade.powerNeeded);if(e.style.width=t+"%",e.style.filter="grayscale( "+(100-t)+"% )","research"===r.InstanceState.selectedTab){var a=o.select(".research-progress-bar .bar");a.style.filter="grayscale( "+(100-t)+"% )",a.style.width=t+"%"}t>=100&&("research"===r.InstanceState.selectedTab?n.UpdatesState.updateTabContent=!0:r.InstanceState.tabs[1].hasUpdates=!0,n.UpdatesState.updateTabs=!0)};exports.completeResearchUpgrade=function(e){Object.values(r.State.researchUpgrades).forEach(function(t){if(t.codeName!==e);else switch(t.isOwned=!0,e){case"fragilitySpectacles":L();break;case"researchPowerUp":r.State.research.maxPower*=1.5;break;default:console.log("default case firing",e)}})};var q,D,G,A=function(e){var t=o.select(".research-power span");r.State.research.power=e,t.innerHTML=e,o.select(".research-ore-usage strong").innerHTML=o.beautifyNumber(Math.pow(r.State.research.power,1.2)*r.State.research.powerToOreRatio)},j=function(){var e=document.createElement("div");e.classList.add("tabs-container"),r.InstanceState.tabs.filter(function(e){return!e.isLocked}).forEach(function(t){var a=o.createEl("div",["tab","tab-"+t.codeName,""+(t.hasUpdates&&"has-updates")]);a.addEventListener("click",function(){return _(t)}),r.InstanceState.selectedTab===t.codeName&&a.classList.add("tab-selected"),a.innerHTML=t.name,"research"===t.codeName&&r.State.research.inProgress&&o.getPercentage(r.State.research.currentProgress,r.State.research.currentUpgrade.powerNeeded)<=100&&(a.innerHTML="\n                    "+t.name+"\n                    <div class='research-tab-progress-bar'>\n                        <div class='bar'></div>\n                    </div>\n                "),e.append(a)}),o.updateEl(s.tabsWrapperEl,e),n.UpdatesState.updateTabs=!1},_=function(e){r.InstanceState.selectedTab!==e.codeName&&(e.hasUpdates&&(e.hasUpdates=!1),r.InstanceState.selectedTab=e.codeName,n.UpdatesState.updateTabs=!0,B())},X=function(e){r.InstanceState.tabs.forEach(function(t){if(t.codeName===e)return t.isLocked=!1,void(n.UpdatesState.updateTabs=!0)})},B=function(){var e,t=document.createElement("div");switch(t.classList.add("tabs-content-container"),r.InstanceState.selectedTab){case"store":e=W();break;case"research":e=Q();break;default:console.log("not built yet")}t.append(e),o.updateEl(s.tabsContentWrapperEl,t),n.UpdatesState.updateTabContent=!1},W=function(){var e=o.createEl("div",["tab-content","tab-content-store"]),t=F(),a=J(),r=z();return t.innerHTML&&e.append(t),e.append(a),e.append(r),e},F=function(){var e=o.createEl("div",["upgrades-container"]);return e.addEventListener("mouseenter",function(){return K("enter")}),e.addEventListener("mouseleave",function(){return K("leave")}),o.sortObj(r.State.upgrades,"price").filter(function(e){return!e[1].isOwned&&!e[1].isLocked}).forEach(function(t){var a=o.createEl("div",["upgrade","upgrade-"+t[1].codeName,""+(r.State.inventory.ores<t[1].price&&"not-enough")],"\n                <img src='./images/upgrade-"+t[1].codeName+".png'/>\n            ");a.addEventListener("click",function(e){return t[1].buy(e)}),a.addEventListener("mouseenter",function(){return m.Sounds.storeItemHover.play()}),a.addEventListener("mousemove",function(e){return t[1].mousemove(e)}),a.addEventListener("mouseleave",function(e){return u.hideTooltip()}),e.append(a)}),e},K=function(e){var t=o.select(".upgrades-container");"enter"===e&&(t.style.height=t.scrollHeight+"px"),"leave"===e&&(t.style.height="60px")},z=function(){var e=o.createEl("div",["buildings-container"]),t=function(t){var a=r.State.buildings[t];if(!a.isHidden){var n=o.createEl("div",["building","building-"+a.codeName,""+(a.isLocked&&"locked")]),s=o.getGeometricSequencePrice(a),i="<img class='building-img' src='./images/building-"+a.codeName+".png' />";a.isLocked||(i+="\n                    <div class='building-left'>\n                        <p class='building-name'>"+a.name+" "+(1!=r.InstanceState.buyAmount?"x"+r.InstanceState.buyAmount:"")+"</p>\n                        <p class='building-price'>\n                            <img src='./images/ore.png' />\n                            "+o.beautifyNumber(s)+"\n                        </p>\n                    </div>\n                    <p class='building-owned'>"+a.owned+"</p>\n                "),n.innerHTML=i,a.isLocked||(n.addEventListener("click",function(e){return a.buy(e)}),n.addEventListener("mouseenter",function(){return m.Sounds.storeItemHover.play()}),n.addEventListener("mousemove",function(e){return a.mousemove(e)}),n.addEventListener("mouseleave",function(){return u.hideTooltip()})),e.append(n)}};for(var a in r.State.buildings)t(a);return e},J=function(){var e=document.createElement("div");e.classList.add("buy-amount-container");var t=o.createEl("p",["buy-amount-text"],"Buy Amount"),a=document.createElement("div");a.classList.add("buy-amounts");return[1,10,100,"max"].forEach(function(e){var t=o.createEl("p",["buy-amount"],e);t.addEventListener("click",function(){M(e),m.Sounds.misc.play()}),e===r.InstanceState.buyAmount&&t.classList.add("selected"),a.append(t)}),e.append(t),e.append(a),e},Q=function(){var e=o.createEl("div",["tab-content","tab-content-research"]),t=o.createEl("div",["under-tab-bar"]),a=Z(),n=r.State.research.inProgress?V():"",s=Y();return e.append(t),e.append(a),e.append(n),e.append(s),e},V=function(){var e=o.createEl("div",["research-progress-container"]),t=r.State.research.currentUpgrade,a=o.getPercentage(r.State.research.currentProgress,t.powerNeeded),n=o.createEl("div",["research-progress-top"],"\n        <p class='research-upgrade-name'>"+t.name+"</p>\n        "),s=o.createEl("button",["collect-btn"],"COLLECT");s.addEventListener("click",function(){return t.complete()});var i=a>=100?s:o.createEl("div",["research-progress-bar"]," <div class='research-progress-bar'>\n                        <div class='bar'></div>\n                    </div>"),c=o.createEl("div");c.append(n),c.append(i);var d=document.createElement("img");return d.src="./images/researchUpgrade-"+t.codeName+".png",e.append(d),e.append(c),e},Y=function(){var e=o.createEl("div",["research-upgrades-wrapper"]),t=o.createEl("p",["research-header-text"],"Available Upgrades"),a=(o.createEl("p",["research-header-text","small"],"Locked Upgrades"),o.createEl("p",["research-header-text","small"],"Owned Upgrades")),n=o.createEl("div",["research-upgrades-container","available-research-upgrades-container"]),s=o.createEl("div",["research-upgrades-container","locked-research-upgrades-container"]),i=o.createEl("div",["research-upgrades-container","owned-research-upgrades-container"]),c=!1,d=!1;return Object.values(r.State.researchUpgrades).forEach(function(e){var t=o.createEl("div",["research-upgrade"]),a=document.createElement("img");if(a.src="./images/researchUpgrade-"+e.codeName+".png",t.append(a),e.isNew){var r=o.createEl("p",["new"],"New!");t.append(r)}!e.isLocked&&!e.isOwned&&!e.isInProgress||e.isRepeatable&&!e.isLocked&&!e.isInProgress?(c=!0,t.addEventListener("click",function(t){return e.buy(t)}),t.addEventListener("mouseover",function(t){m.Sounds.storeItemHover.play(),e.removeNew(t)}),t.addEventListener("mousemove",function(t){return u.showTooltip(t,{type:"researchUpgrade",researchUpgrade:e})}),t.addEventListener("mouseleave",function(){return u.hideTooltip()}),n.append(t)):e.isLocked?(!0,s.append(t)):e.isOwned&&(d=!0,t.addEventListener("mousemove",function(t){return u.showTooltip(t,{type:"researchUpgrade",researchUpgrade:e})}),t.addEventListener("mouseleave",function(){return u.hideTooltip()}),i.append(t))}),c&&(e.append(t),e.append(n)),d&&(e.append(a),e.append(i)),e},Z=function(){var e=o.createEl("div",["research-settings-container"],"\n        <p class='research-power-text'>Research Power</p>\n        <p class='research-power'><span>"+r.State.research.power+"</span><small>/sec</small></p>\n    "),t=document.createElement("input");t.classList.add("research-slider"),t.type="range",t.min="0",t.max=""+Math.floor(r.State.research.maxPower),t.value=""+r.State.research.power,t.step="1",t.addEventListener("input",function(e){return A(e.target.value)}),e.append(t);var a=o.createEl("p",["research-ore-usage"],"Using <strong>"+o.beautifyNumber(Math.pow(r.State.research.power,1.2)*r.State.research.powerToOreRatio)+"</strong> ores per second while researching.");return e.append(a),e},$=function(){var e=o.getRandomFromArr(r.State.textScrollerMessages);s.textScrollerTextEl.innerHTML=e,r.InstanceState.textScroller.isInProgress=!0},ee=function(){var e=30===r.State.settings.tick?2:1,t=s.textScrollerTextEl.offsetLeft;s.textScrollerTextEl.style.left=t-e+"px",t+s.textScrollerTextEl.offsetWidth<=0&&(s.textScrollerTextEl.innerHTML="",s.textScrollerTextEl.style.left="100%",r.InstanceState.textScroller.isInProgress=!1,$())},te=0,ae=function(){if(n.UpdatesState.updateOres&&U(),n.UpdatesState.updateOreHp&&k(),n.UpdatesState.updateOreSprite&&C(),n.UpdatesState.updateGenerationLv&&O(),n.UpdatesState.updateGenerationXp&&H(),n.UpdatesState.updateGenerationLvOnRefine&&P(),n.UpdatesState.updateTabs&&j(),n.UpdatesState.updateTabContent&&B(),n.UpdatesState.updateOPS&&exports.updateOPS(),"store"===r.InstanceState.selectedTab&&N(),r.InstanceState.textScroller.isInProgress&&ee(),r.State.research.inProgress&&I(),v(r.State.ops/r.State.settings.tick),Object.keys(r.InstanceState.oreParticles).length>0)for(var e in s.particlesCanvasContext.clearRect(0,0,s.particlesCanvasContext.canvas.width,s.particlesCanvasContext.canvas.height),r.InstanceState.oreParticles)r.InstanceState.oreParticles[e].draw();++te>=r.State.settings.tick&&(te=0,r.State.ops>0&&c.generateRisingText(null,"buildingOps",r.State.ops))},re=function(){s.particlesCanvasEl.height=window.innerHeight,s.particlesCanvasEl.width=window.innerWidth},ne=function(){r.State.stats.highestCombo>=5&&s.comboSignEl.classList.add("visible")},se=function(){re(),d.instantiateTabs(),p.instantiateBuildings(),l.instantiateResearchUpgrades(),S.instantiateAchievements(),ne(),g.instantiateUpgrades(),s.oreSpriteEl.onclick=y,$(),setInterval(ae,1e3/r.State.settings.tick)};window.onload=function(){return se()};var oe=document.querySelector(".fps");oe.style.zIndex="5",q=Date.now(),requestAnimationFrame(function e(){D=Date.now(),G=Math.round(1e3/(D-q)),q=D,requestAnimationFrame(e),oe.innerHTML=G});
},{"./State":"ibrd","./Updates":"owfE","./constants":"FCax","./utils":"GUxD","./OreParticle":"vI8V","./RisingText":"UmE0","./Tabs":"PZUX","./Buildings":"xBG6","./Tooltip":"JjQV","./ResearchUpgrades":"vNBS","./Achievements":"ctio","./Upgrades":"ypIX","./Sounds":"Crhs"}]},{},["KqmS"], null)
//# sourceMappingURL=replacethislinewithadot/scripts.cc57487b.js.map